openapi: 3.0.0
info:
  description: 'This is the FoodAuthent API Description [www.foodauthent.net]'
  version: 1.0.0
  title: FoodAuthent Swagger API
  termsOfService: 'https://www.foodauthent.net/terms/'
  contact:
    email: api@foodauthent.net
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'

tags:
  - name: sop
    description: All standard operating procedure endpoints.
  - name: product
    description: All product endpoints.
  - name: fingerprint
    description: All fingerprint/sample endpoints.
  - name: workflow
    description: All workflow endpoints.
  - name: model
    description: All model endpoints.
  - name: tag
    description: 'All endpoints to deal with tags, i.e. query, delete, add, ...'
  - name: file
    description: All endpoint that deal with files.
  - name: custom-metadata
    description: Endpoints that deal with custom metadata.
  - name: authentication
    description: Authentication endpoint.
  - name: user
    description: All user related endpoints.
  - name: organization
    description: All organization related endpoints.
  - name: ObjectEvent
    description: All ObjectEvent related endpoints.
  - name: Transaction
    description: All Transaction related endpoints.
    
paths:
  /sop:
    get:
      tags:
        - sop
      summary: Finds SOPs by some key words or return all sop's.
      description: >-
        Muliple tags can be provided with comma separated strings. Use keyword1,
        keyword2, keyword3 for testing. If no keyword is specified, all entries
        will be considered.
      operationId: findSOPByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SOPPageResult'
    post:
      tags:
        - sop
      description: Creates a new SOP.
      operationId: createNewSOP
      responses:
        '201':
          description: New sop created with the new sop-id returned.
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SOP'
        description: TODO
        required: true

  '/sop/{sop-id}':
    get:
      tags:
        - sop
      description: Get the sop an id.
      operationId: getSOPById
      parameters:
        - name: sop-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The SOP.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SOP'
    delete:
      tags:
        - sop
      description: Delete a sop specified by id.
      operationId: removeSOPById
      parameters:
        - name: sop-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: SOP successfully deleted.
  /file:
    post:
      tags:
        - file
      description: Creates a new file by posting the file metadata first.
      operationId: createFileMetadata
      responses:
        '201':
          description: >-
            New file metadata object created. Returns its fa-id (i.e. the file
            id)
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FileMetadata'
        description: The actual metadata object.
        required: true

  '/file/{file-id}':
    get:
      tags:
        - file
      description: Returns the file metadata.
      operationId: getFileMetadata
      parameters:
        - name: file-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The file metadata.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileMetadata'

  '/file/{file-id}/import':
    get:
      tags:
      - file
      summary: Import a ZIP file
      description: >-
        Import FoodAuthent components from an existing ZIP file and return the
        ids of the components.
      operationId: importFile
      parameters:
      - name: file-id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: TODO
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImportResult'
                
  '/file/{file-id}/export':
    post:
      tags:
      - file
      summary: Import a file
      description: >-
        Export FoodAuthent components
      operationId: exportFile
      parameters:
      - name: file-type
        in: query
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FaObjectSet'
        description: Specifies a set of fa-objects to be exported.
        required: true
      responses:
        '200':
          description: The exported file data.
          content:
            application/binary:
              schema:
                type: string
                format: binary

  
  '/file/{file-id}/data':
    get:
      tags:
        - file
      description: Let one download the actual file data.
      operationId: getFileData
      parameters:
        - name: file-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The file data.
          content:
            application/binary:
              schema:
                type: string
                format: binary
    put:
      tags:
        - file
      description: Uploads (and replaces) the actual file-data for the given file id
      operationId: saveFileData
      parameters:
        - name: file-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: >-
            File data has been uploaded successfully. Returns the fa-id of the
            file (i.e. file-id)
          content:
            application/json:
              schema:
                type: string
                format: uuid
        #TODO fix response codes!!
        '433':
          $ref: "#/components/responses/InvalidData" 
        '434':
          $ref: "#/components/responses/InvalidInput"
        '500':
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/File"

  /fingerprintset:
    get:
      tags:
        - fingerprint
      summary: Finds fingerprint sets by some key words or return all fingerprint sets.
      description: >-
        Muliple keywords can be provided with comma separated strings,e.g. use keyword1,
        keyword2, keyword3.
      operationId: findFingerprintSetByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FingerprintSetPageResult'
    post:
      tags:
        - fingerprint
      description: Create a new fingerprint set.
      operationId: createFingerprintSet
      responses:
        '201':
          description: >-
            The new id of the fingerprint set in the fa-system (fingerprint-set
            id)
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FingerprintSet'
        description: A fingerprint set containing fingerprint metadata.
        required: true

  '/fingerprintset/{fingerprintset-id}':
    get:
      tags:
        - fingerprint
      description: Get the fingerprintset by id.
      operationId: getFingerprintSetById
      parameters:
        - name: fingerprintset-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The fingerprint set.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FingerprintSet'
  '/product/{gtin}':
    delete:
      tags:
        - product
      description: Delete a product specified by gtin.
      operationId: removeProductByGtin
      parameters:
        - name: gtin
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Product successfully deleted.
          
          
  /product:
    get:
      tags:
        - product
      summary: Finds Products by some key words or return all Products.
      description: >-
        Muliple keywords can be provided with comma separated strings, e.g, keyword1, keyword2.
      operationId: findProductByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductPageResult'
    post:
      tags:
        - product
      description: Create a new product entity.
      operationId: createProduct
      responses:
        '201':
          description: >-
            Product has been created successfully and the new fa-id of the
            product is returned.
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
        description: TODO
    put:
      tags:
        - product
      summary: update a new product entity.
      description: TODO
      operationId: updatedProduct
      responses:
        '200':
          description: SOP successfully deleted.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
        description: TODO
  
  /product/findByGtin:
    get:
      tags:
        - product
      description: Find product by gtin.
      operationId: findProductByGtin
      parameters:
        - in: query
          name: gtin
          description: The gtin to find the product for.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The found product.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '404':
          description: TODO, add response reference
  
  /product/{product-id}:
    get:
      tags:
        - product
      description: Gets product by id.
      operationId: getProductById
      parameters:
        - in: path
          name: product-id
          description: The id to get the product for.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The found product.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '404':
          description: TODO, add response reference

  /prediction:
    get:
      tags:
        - workflow
      summary: Finds Prediction by some key words or return all Predictions.
      description: >-
        Muliple keywords can be provided with comma separated strings, e.g. keyword1, keyword2.
      operationId: findModelByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PredictionPageResult'

  '/prediction/{prediction-id}':
    get:
      tags:
        - workflow
      summary: Get a specific prediction result.
      operationId: getPredictionResult
      parameters:
        - in: path
          name: prediction-id
          description: TODO
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of predictions.
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/Prediction'
  /model:
    get:
      tags:
        - model
      summary: Finds Models by some key words or return all Models.
      description: >-
        Muliple keywords can be provided with comma separated strings, e.g. keyword1, keyword2.
      operationId: findModelByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelPageResult'
    post:
      tags:
        - model
      summary: Creates/adds a new model.
      description: Creates/adds a new model.
      operationId: createModel
      responses:
        '201':
          description: >-
            Model has been created successfully and the new fa-id of the model
            (model-id) is returned.
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Model'
        description: TODO

  '/model/{model-id}':
    get:
      tags:
        - model
      summary: Get the model by id.
      description: TODO
      operationId: getModelById
      parameters:
        - name: model-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The model.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Model'

  /workflow:
    get:
      tags:
        - workflow
      summary: Finds Workflow by some key words or return all Workflows.
      description: >-
        Muliple tags can be provided with comma separated strings. Use tag1,
        tag2, tag3 for testing.
      operationId: findWorkflowByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowPageResult'
    post:
      tags:
        - workflow
      summary: Creates/adds a new workflow.
      description: Creates/adds a new workflow.
      operationId: createWorkflow
      responses:
        '201':
          description: >-
            Workflow has been created successfully and the new fa-id of the
            workflow is returned.
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workflow'
        description: TODO

  '/workflow/{workflow-id}':
    get:
      tags:
        - workflow
      summary: Get the workflow an id.
      description: TODO
      operationId: getWorkflowById
      parameters:
        - name: workflow-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The workflow.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workflow'

  /workflow/training:
    get:
      tags:
        - workflow
      summary: >-
        Finds workflows by some key words or return all workflows suitable for
        training models.
      description: >-
        Muliple tags can be provided with comma separated strings. Use tag1,
        tag2, tag3 for testing.
      operationId: findTrainingWorkflows
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowPageResult'

  /workflow/training/job:
    get:
      tags:
        - workflow
      summary: Finds training jobs by some key words or return all training jobs.
      description: >-
        Muliple tags can be provided with comma separated strings. Use tag1,
        tag2, tag3 for testing.
      operationId: findTrainingJobs
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrainingJobPageResult'
    post:
      tags:
        - workflow
      summary: Starts creating a model for a set of fingerprints.
      operationId: createTrainingJob
      parameters:
        - in: query
          name: workflow-id
          description: TODO
          required: true
          schema:
            type: string
            format: uuid
        - in: query
          name: fingerprintset-id
          description: TODO
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: The model training job as been created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrainingJob'
        '500':
          $ref: "#/components/responses/InitJobFailed"

  '/workflow/training/job/{job-id}':
    get:
      tags:
        - workflow
      summary: Lets one to ask for the status of a particular job.
      operationId: getTrainingJob
      parameters:
        - in: path
          name: job-id
          description: TODO
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The training job.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrainingJob'

  /workflow/prediction:
    get:
      tags:
        - workflow
      summary: >-
        Finds workflows by some key words or return all workflows suitable for
        prediction.
      description: >-
        Muliple tags can be provided with comma separated strings. Use tag1,
        tag2, tag3 for testing.
      operationId: findPredictionWorkflows
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowPageResult'

  /workflow/prediction/job:
    get:
      tags:
        - workflow
      summary: >-
        Finds predictions jobs by some key words or return all predictions jobs
        suitable for prediction.
      description: >-
        Muliple tags can be provided with comma separated strings. Use tag1,
        tag2, tag3 for testing.
      operationId: findPredictionJobs
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PredictionJobPageResult'
    post:
      tags:
        - workflow
      summary: Starts a prediction for a fingerprint.
      operationId: createPredictionJob
      parameters:
        - in: query
          name: workflow-id
          description: TODO
          required: true
          schema:
            type: string
            format: uuid
        - in: query
          name: fingerprintset-id
          description: TODO
          required: true
          schema:
            type: string
            format: uuid
        - in: query
          name: model-id
          description: >-
            The model to be used for prediction. Needs to be compatible with the
            selected workflow!!
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The prediction job.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PredictionJob'
        '500':
          $ref: "#/components/responses/InitJobFailed"

  '/workflow/prediction/job/{job-id}':
    get:
      tags:
        - workflow
      summary: Lets one to ask for the status of a particular job.
      operationId: getPredictionJob
      parameters:
        - in: path
          name: job-id
          description: TODO
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The prediction job.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PredictionJob'
                
  /authenticate/jwt:
    post:
      tags:
        - authentication
      summary: Authenticate user.
      description: TODO
      operationId: authenticateUserJSONWebToken
      responses:
        200:
          description: JSON Web Token for authenticated user successfully.
          content:
            text/plain:
              schema:
                type: string
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserAuthenticationRequest'
        description: TODO
        required: true

  /authenticate/jwt/verify:
    post:
      tags:
        - authentication
      summary: verify JSON Web Token.
      description: TODO
      operationId: verifyJSONWebToken
      responses:
        200:
          description: Token verified successfully.
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        description: JWT token to be verfied
        required: true   
        content:     
          text/plain:
            schema:
              type: string

  /authenticate/jwt/refresh:
    post:
      tags:
        - authentication
      summary: refresh JSON Web Token to extend expirtation time
      description: TODO
      operationId: refreshJSONWebToken
      responses:
        200:
          description: Updated JSON Web Token for authenticated user's token.
          content:
            text/plain:
              schema:
                type: string
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        description: User's JSON Web Token to refresh
        required: true   
        content:     
          text/plain:
            schema:
              type: string

            
  /user:
    post:
      tags:
        - user
      summary: create new user.
      description: TODO
      operationId: createUser
      responses:
        200:
          description: details of successfully created user.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        409:
          $ref: "#/components/responses/ModelAlreadyExistsResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreateRequest'
        description: TODO
        required: true


  /user/{dn}:        
    get:
      tags:
        - user
      summary: get existing user.
      description: TODO
      operationId: getUser
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user's LDAP dn     
      responses:
        200:
          description: User details.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        500:
          $ref: "#/components/responses/FAException"    

    put:
      tags:
        - user
      summary: update existing user.
      description: TODO
      operationId: updateUser
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user's LDAP dn           
      responses:
        200:
          description: updated user details.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse"
        415:
          $ref: "#/components/responses/InvalidOperationResponse"
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserBase'
        description: TODO
        required: true   

    delete:
      tags:
        - user
      summary: delete existing user.
      description: TODO
      operationId: deleteUser
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user's LDAP dn     
      responses:
        200:
          description: User deleted.
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"
        500:
          $ref: "#/components/responses/FAException"  

  /user/{dn}/pwgen:        
    get:
      tags:
        - user
      summary: generate password for user.
      description: TODO
      operationId: generatePassword
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user's LDAP dn    
        - in: query
          name: length
          required: false 
          schema:
            type: integer
          description: length of generated password     
      responses:
        200:
          description: new password
          content:
            text/plain:
              schema:
                type: string        
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        500:
          $ref: "#/components/responses/FAException"  

  /user/{dn}/pwset:        
    post:
      tags:
        - user
      summary: set password for user.
      description: TODO
      operationId: setPassword
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user's LDAP dn
      responses:
        200:
          description: new password was set
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        500:
          $ref: "#/components/responses/FAException"  
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
        description: TODO
        required: true   

  /user/group:
    post:
      tags:
        - user
      summary: create new user group.
      description: TODO
      operationId: createUserGroup
      responses:
        200:
          description: details of successfully created user group.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserGroup'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        409:
          $ref: "#/components/responses/ModelAlreadyExistsResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"                    
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserGroupCreateRequest'
        description: TODO
        required: true

  /user/group/{dn}:        
    get:
      tags:
        - user
      summary: get existing user group.
      description: TODO
      operationId: getUserGroup
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user group's LDAP dn     
      responses:
        200:
          description: User group details.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserGroup'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        500:
          $ref: "#/components/responses/FAException"    

    put:
      tags:
        - user
      summary: update existing user group.
      description: TODO
      operationId: updateUserGroup
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user group's LDAP dn           
      responses:
        200:
          description: updated user group details.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserGroup'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"                    
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserGroupBase'
        description: TODO
        required: true   

    delete:
      tags:
        - user
      summary: delete existing user group.
      description: TODO
      operationId: deleteUserGroup
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The user group's LDAP dn     
      responses:
        200:
          description: User deleted.
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"
        500:
          $ref: "#/components/responses/FAException"  

  /organization:
    post:
      tags:
        - organization
      summary: create new organization.
      description: TODO
      operationId: createOrganization
      responses:
        200:
          description: details of successfully created organization.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        409:
          $ref: "#/components/responses/ModelAlreadyExistsResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"          
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationCreateRequest'
        description: TODO
        required: true

  /organization/{dn}:        
    get:
      tags:
        - organization
      summary: get existing organization.
      description: TODO
      operationId: getOrganization
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The organization's LDAP dn     
      responses:
        200:
          description: Organization details.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        500:
          $ref: "#/components/responses/FAException"    

    put:
      tags:
        - organization
      summary: update existing organization.
      description: TODO
      operationId: updateOrganization
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The organization's LDAP dn     
      responses:
        200:
          description: updated organization details.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"          
        500:
          $ref: "#/components/responses/FAException"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationBase'
        description: TODO
        required: true   
        
    delete:
      tags:
        - organization
      summary: delete existing organization.
      description: TODO
      operationId: deleteOrganization
      parameters:
        - in: path
          name: dn
          required: true 
          schema:
            type: string
          description: The organization's LDAP dn     
      responses:
        200:
          description: Organization deleted.
        401:
          $ref: "#/components/responses/UnauthorizedResponse" 
        403:
          $ref: "#/components/responses/ForbiddenAccessResponse" 
        404:
          $ref: "#/components/responses/ModelNotFoundResponse" 
        415:
          $ref: "#/components/responses/InvalidOperationResponse"
        500:
          $ref: "#/components/responses/FAException"    

                          
  '/custommetadata/{model-id}':
    get:
      tags:
        - custom-metadata
      summary: Returns all available schema ids for a model id.
      description: >-
        TODO
      operationId: getCustomMetadataSchemas
      parameters:
        - $ref: "#/components/parameters/model-id"
      responses:
        '200':
          description: The list of schema-ids available for this type of entity.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                
  '/custommetadata/{model-id}/{schema-id}':
    get:
      tags:
        - custom-metadata
      summary: Returns the json-schema for a given schema- and model-id.
      description: >-
        TODO
      operationId: getCustomMetadataSchema
      parameters:
        - $ref: "#/components/parameters/model-id"
        - $ref: "#/components/parameters/schema-id"
      responses:
        '200':
          description: TODO
          content:
            application/schema+json:
              schema:
                type: string 
                
  '/custommetadata/{model-id}/{schema-id}/{fa-id}':
    get:
      tags:
        - custom-metadata
      summary: Returns the custom metadata for a specific model, schema and model-instance.
      description: >-
        TODO
      operationId: getCustomMetadata
      parameters:
        - $ref: "#/components/parameters/model-id"
        - $ref: "#/components/parameters/schema-id"
        - in: path
          name: fa-id
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: TODO
          content:
            application/json:
              schema:
                type: string 
    post:
      tags:
        - custom-metadata
      summary: Adds custom metadata for a specific model, schema and model-instance.
      description: >-
        TODO
      operationId: saveCustomMetadata
      parameters:
        - $ref: "#/components/parameters/model-id"
        - $ref: "#/components/parameters/schema-id"
        - in: path
          name: fa-id
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Custom metadata successfully added
      requestBody:
        content:
          application/json:
            schema:
              description: The object representing the custom metadata for a model with the given fa-id.
              type: string
                
  /epcis/objectEvent/:
    get:
      tags:
        - ObjectEvent
      summary: Finds Object Event by epcClass or return all Object Events.
      description: >-
        Muliple keywords(epcClass) can be provided with comma separated strings, e.g, keyword1, keyword2.
      operationId: findObjectEventByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObjectEventPageResult'
    post:
      tags:
        - ObjectEvent
      summary: Creates/adds a new ObjectEvent.
      description: Creates/adds a new ObjectEvent.
      operationId: createObjectEvent
      responses:
        '201':
          description: >-
            ObjectEvent has been created successfully and the new fa-id of the ObjectEvent
            is returned.
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ObjectEvent'
        description: TODO
        
  '/epcis/objectEvent/{objectevent-id}':
    get:
      tags:
        - ObjectEvent
      description: Get the ObjectEvent an id.
      operationId: getObjectEventById
      parameters:
        - name: objectevent-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The ObjectEvent.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObjectEvent'
                
  /discovery/transaction:
    get:
      tags:
        - Transaction
      summary: Finds transaction by keywords or return all transactions.
      description: >-
        Muliple keywords can be provided with comma separated strings, e.g, keyword1, keyword2.
      operationId: findTransactionByKeyword
      parameters:
        - $ref: "#/components/parameters/pageNumber"
        - $ref: "#/components/parameters/pageSize"
        - $ref: "#/components/parameters/keywords"
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionPageResult'
    post:
      tags:
        - Transaction
      summary: Creates/adds a new Transaction.
      description: Creates/adds a new Transaction.
      operationId: createTransaction
      responses:
        '201':
          description: >-
            Transaction has been created successfully and the new fa-id of the ObjectEvent
            is returned.
          content:
            application/json:
              schema:
                type: string
                format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DiscoveryServiceTransaction'
        description: TODO
        
  '/discovery/transaction/{transaction-id}':
    get:
      tags:
        - Transaction
      description: Get the Transaction an id.
      operationId: getTransactionById
      parameters:
        - name: transaction-id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The Transaction.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscoveryServiceTransaction'
        
        
servers:
  - url: /v0/foodauthent

components:
  parameters:
    pageNumber:
      description: the page number starting at 0
      name: pageNumber
      in: query
      schema:
        type: integer
    pageSize: 
      description: entries per page, minimum 1
      name: pageSize
      in: query
      schema:
        type: integer
    keywords:
      name: keywords
      in: query
      description: Keywords to search for
      required: false
      explode: true
      schema:
        type: array
        items:
          type: string
    model-id:
      name: model-id
      in: path
      required: true
      schema:
        enum:
          - product
          - fingerprintset
          - sop
    schema-id:
      name: schema-id
      in: path
      required: true
      schema:
        type: string               

  responses:
    FAException:
      description: Unspecified exception.
      x-fa-exceptions:
        - name: FAException
    InvalidInput:
      description: Invalid input was provided.
      x-fa-exceptions:
        - name: InvalidInputException
    InitJobFailed:
      description: Exception thrown when a job could not be initialized.
      x-fa-exceptions:
        - name: InitJobException
    InvalidData:
      description: Invalid data was uploaded.
      x-fa-exceptions:
        - name: InvalidDataException
    ModelAlreadyExistsResponse:
      description: Invalid input was provided, model already exists.
      content:
        text/plain:
          schema:
            type: string        
      x-fa-exceptions:
        - name: ModelAlreadyExistsResponse
    ModelNotFoundResponse:
      description: Response thrown when an model could not be found.
      content:
        text/plain:
          schema:
            type: string        
      x-fa-exceptions:
        - name: ModelNotFoundResponse
    ForbiddenAccessResponse:
      description: Access to resource is not allowed.
      content:
        text/plain:
          schema:
            type: string        
      x-fa-exceptions:
        - name: ForbiddenAccessResponse
    InvalidOperationResponse:
      description: Requested operation is not supported.
      content:
        text/plain:
          schema:
            type: string        
      x-fa-exceptions:
        - name: InvalidOperationResponse
    UnauthorizedResponse:
      content:
        text/plain:
          schema:
            type: string        
      description: Unauthorized access.
      x-fa-exceptions:
        - name: UnauthorizedResponse
  schemas:
    SOPPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/SOP'

    SOP:
      type: object
      x-ui-vue.js:
        - name: file-id
          id-provider: upload-file
        - name: name
        - name: description
        - name: product-id
          id-provider: select-product
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        file-id:
          description: Id referencing the file in the fa-system.
          type: string
          format: uuid
        name:
          description: A short SOP name
          type: string
        description:
          description: A short description of the sop
          type: string
        product-id:
          description: A reference to a product this sop is made for.
          type: string
          format: uuid
          example: ''

    FileMetadata:
      description: Metadata of a file in the FoodAuthent-system.
      type: object
      x-ui-vue.js:
        - name: type
        - name: name
        - name: author
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        type:
          description: The file type.
          type: string
          enum:
            - knime_workflow
            - knime_model
            - python_script
            - sop_pdf
            - fingerprints_bruker
            - zip
        name:
          description: A name for the file.
          type: string
        uploadName:
          description: >-
            The name of the file as uploaded. Will be set automatically if left
            empty and a file is uploaded for the first time.
          type: string
        description:
          description: A more verbose description of the file.
          type: string
        author:
          description: The authors name (TODO - could reference a user in the future).
          type: string
        date:
          description: The creation date.
          type: string
          format: date
        uploadDate:
          description: Time and date of the file upload. Will be set automatically.
          type: string
          format: date
        version:
          description: The file's version.
          type: integer
        additional-properties:
          description: Key-value-map for additional properties.
          #string to string map
          type: object
          additionalProperties:
            type: string
          
    File:
      description: A file, e.g. to be uploaded
      type: object
      properties:
        filedata:
          description: The binary file data.
          type: string
          format: binary
      required:
        - filedata

    # should always be part of a fingerprint set
    Fingerprint:
      description: A fingerprint object representing its metadata.
      type: object
      x-ui-vue.js:
        - name: metadata
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        metadata:
          description: Placeholder for the actual metadata.
          type: string
        additional-properties:
          description: Key-value-map for additional properties.
          #string to string map
          type: object
          additionalProperties:
            type: string

    FingerprintSetPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/FingerprintSet'

    FingerprintSet:
      description: A set of fingerprints with its own id.
      type: object
      required:
        - file-id
        - product-id
      x-ui-vue.js:
        - name: product-id
          id-provider: select-product
        - name: fingerprints
        - name: file-id
          id-provider: upload-file
        - name: name
        - name: metadata
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        product-id:
          description: The fa-id of the product all fingerprints are associated with.
          type: string
          format: uuid
          example: ''
        fingerprints:
          description: The fingerprints.
          type: array
          items:
            $ref: '#/components/schemas/Fingerprint'
        file-id:
          description: Id referencing the fingerpint-set file.
          type: string
          format: uuid
        name:
          description: A human-readable name of the fingerprint set.
          type: string
        metadata:
          description: >-
            Placeholder for more (fixed) metadata (including device settings
            etc.). Possibly automatically determined upon creation of the
            fingerprint-set.
          type: string
        additional-properties:
          description: Key-value-map for additional properties.
          type: object
          additionalProperties:
            type: string

    ModelPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/Model'

    Model:
      description: >-
        A model created via training and used for prediction. Can also be a
        workflow.
      type: object
      x-ui-vue.js:
        - name: name
        - name: description
        - name: author
        - name: version
        - name: type
        - name: tags
        - name: file-id
          id-provider: upload-file
        - name: product-id
          id-provider: select-product
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        name:
          description: A name for the model.
          type: string
        description:
          description: A more verbose description of the model.
          type: string
        author:
          description: The authors name (TODO - could reference a user in the future).
          type: string
        date:
          description: The creation date.
          type: string
          format: date
        version:
          description: The model's version.
          type: integer
        type:
          #TODO allow custom types that are not predefined
          description: >-
            The type of the model in order to be able to check for compatibility
            of the workflows using it.
          type: string
          # must be kept in sync with workflow.model-type
          enum:
            - knime_workflow
            - knime_python
            - pmml
        tags:
          description: Descriptive tags/annotations for the model.
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        file-id:
          description: id referencing the model file.
          type: string
          format: uuid
        product-id:
          description: Reference to the product this model has been trained for.
          type: string
          format: uuid
        workflow-id:
          description: Optional reference to the workflow used to create this model.
          type: string
          format: uuid

    ProductPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/Product'

    Product:
      description: >-
        Global product metadata, e.g., country of origin, etc. There can be
        multiple fingerprints for one product.
      type: object
      x-ui-vue.js:
        - name: gtin
        - name: brand
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        gtin:
          type: string
        brand:
          type: string
        gpcAttributes:
          type: array
          items:
            $ref: '#/components/schemas/GPCAttribute'

    GPCAttribute:
      description: >-
        Global Product Classification Attribute for storing gpc brick details
      type: object
      x-no-faid: true
      x-ui-vue.js:
      - name: attributeTypeCode
      - name: attributeTypeName
      - name: attributeValueCode
      - name: attributeValueName
      properties:
        attributeTypeCode:
          description: GPC brick code
          type: string
        attributeTypeName:
          description: GPC brick human readable name
          type: string
        attributeValueCode:
          description: GPC brick's value
          type: string
        attributeValueName:
          description: GPC brick's value human readable description 
          type: string
          
    PredictionJobPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/PredictionJob'

    PredictionJob:
      description: Represents prediction job.
      type: object
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        prediction-id:
          description: >-
            The id of the prediction result if the job has completed
            successfully.
          type: string
          format: uuid
          example: ''
        status:
          description: The current status of the prediction job.
          type: string
          enum:
            - running
            - success
            - failed
        status-message:
          description: 'A message, e.g., in case the workflow failed.'
          type: string

    PredictionPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/Prediction'

    #predictions per fingerprint set!!
    Prediction:
      type: object
      x-ui-vue.js:
        - name: workflow-id
          id-provider: select-workflow
        - name: fingerprint-set-id
          id-provider: select-fingerprint
        - name: model-id
          id-provider: select-model
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        confidence-map:
          description: >-
            The confidences for each fingerprint, mapped from the
            fingerprint-id.
          type: object
          #map from fa-id to confidence
          additionalProperties:
            type: number
            format: float
            maximum: 1
            minimum: 0
        workflow-id:
          description: Workflow used for the prediction.
          type: string
          format: uuid
          example: ''
        fingerprint-set-id:
          description: Id of the set the prediction has been done for.
          type: string
          format: uuid
          example: ''
        model-id:
          description: The model that has been used for the prediction.
          type: string
          format: uuid
          example: ''

    TrainingJobPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/TrainingJob'

    TrainingJob:
      description: Represents model training job.
      type: object
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        model-id:
          description: The created model after successful training.
          type: string
          format: uuid
          example: ''
        status:
          type: string
          enum:
            - running
            - success
            - failed
        status-message:
          description: 'A message, e.g., in case the workflow failed.'
          type: string

    TagPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/Tag'

    Tag:
      description: A tag/label for objects.
      type: object
      x-ui-vue.js:
        - name: name
        - name: description
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        name:
          description: A human-readable name
          type: string
        description:
          description: A more verbose description.
          type: string
        type:
          description: >-
            The type of the tag, e.g. whether it's a tag for a workflow, a model
            or a fingerprint.
          type: string
          enum:
            - workflow
            - model
            - fingerprint
            - sop

    WorkflowPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/Workflow'

    Workflow:
      type: object
      description: A workflow for a certain task.
      required:
        - type
        - file-id
        - name
        - representation
      x-ui-vue.js:
        - name: name
        - name: description
        - name: type
        - name: parameters
        - name: tags
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
          example: ''
        name:
          type: string
        description:
          type: string
        representation:
          description: >-
            The workflow representation, e.g. represented by a scripting
            language, cwl or a KNIME-workflow.
          type: string
          enum:
            - cwl
            - r
            - python
            - knime
        type:
          #TODO allow custom types that are not predefined
          description: >-
            The type of the workflow.  IMPORTANT: This property determines the
            required workflow input and output, e.g., PredictionWorkflowInput
            and PredicitonWorkflowOutput-entity.
          type: string
          #TODO another potential type: preprocessing workflow
          enum:
            - prediction_workflow
            - training_workflow
        parameters:
          description: 'The parameters of the workflow, TODO - should maybe be a map.'
          type: array
          items:
            $ref: '#/components/schemas/WorkflowParameter'
        tags:
          description: Descriptive tags/annotations for the workflow.
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        file-id:
          description: id referencing the workflow file.
          type: string
          format: uuid
        model-type:
          description: >-
            Type of the model this workflow can consume or produce. Can be left
            empty, e.g., in case of a preprocessing workflow. Model type must
            match one of the model's type property.
          type: string
          # must be kept in sync with model.type
          enum:
            - knime_workflow
            - knime_python
            - pmml

    WorkflowParameter:
      type: object
      description: Represents a workflow parameter.
      x-no-faid: true
      x-ui-vue.js:
        - name: name
        - name: required
        - name: type
        - name: value
      properties:
        name:
          description: the parameter name
          type: string
        required:
          description: whether the parameter is required
          type: boolean
        type:
          description: the parameter type
          type: string
          enum:
            - string
            - number
        value:
          description: the parameter value
          type: string
          

    # Inputs and outputs for different workflow types (see type-property of the workflow entity).
    # Not used by any endpoint but as entity directly!
    # Changes here might cause (test) workflows to not work anymore.

    PredictionWorkflowInput:
      description: Describes the input required by a prediction workflow.
      type: object
      x-no-faid: true
      properties:
        parameters:
          description: The workflow parameters as given provided by the Workflow-entity.
          type: array
          items:
            $ref: '#/components/schemas/WorkflowParameter'
        fingerprintset-metadata:
          $ref: '#/components/schemas/FingerprintSet'
        fingerprintset-URI:
          description: >-
            URI pointing to the resource containg the fingerprints to predict
            the labels for.
          type: string
          format: uri
        model-URI:
          description: >-
            optional model uri (if required by the workflow) pointing to the
            model to use
          type: string
          format: uri

    PredictionWorkflowOutput:
      description: Describes the outputs delivered by a prediction workflow.
      type: object
      x-no-faid: true
      properties:
        confidence-map:
          description: >-
            The confidences for each fingerprint, mapped from the
            fingerprint-id.
          type: object
          #map from fa-id to confidence
          additionalProperties:
            type: number
            format: float
            maximum: 1
            minimum: 0

    TrainingWorkflowInput:
      description: Describes the input required by a training workflow.
      type: object
      x-no-faid: true
      properties:
        parameters:
          description: The workflow parameters as given provided by the Workflow-entity.
          type: array
          items:
            $ref: '#/components/schemas/WorkflowParameter'
        fingerprintset-metadata:
          $ref: '#/components/schemas/FingerprintSet'
        fingerprintset-URI:
          description: >-
            URI pointing to the resource containg the fingerprints to learn the
            model from.
          type: string
          format: uri

    TrainingWorkflowOutput:
      description: Describes the outputs delivered by a training workflow.
      type: object
      x-no-faid: true
      properties:
        model-uri:
          description: URI pointing to the created model file.
          type: string
          format: uri

    UserAuthenticationRequest:
      description: Request Object for User authentication
      type: object
      x-no-faid: true
      required:
        - user
        - password
      properties:
        user:
          type: string
        password:
          type: string
          
    PostalAddress:
      description: postal address object
      type: object
      x-no-faid: true
      required:
        - street
        - postalCode
        - localityName
      properties:
        otherRecipientInformation:
          description: recipient address part
          type: string
        street:
          description: street address part
          type: string
        postalCode:
          description: postalCode address part
          type: string
        localityName:
          description: locality/city address part
          type: string
        stateOrProvinceName:
          description: stateOrProvinceName address part
          type: string
        country:
          description: country address part
          type: string

    OrganizationalPostalAddress:
      description: organizational postal address object
      type: object
      x-no-faid: true
      allOf:
        - $ref: '#/components/schemas/PostalAddress'
        - type: object
          x-no-faid: true
          properties:
            recipientName:
              description: recipient address part
              type: string

    UserBase:
      description:  User Base Object 
      type: object
      x-no-faid: true
      required:
        - lastName
        - givenName
      properties:
        title:
          description: title
          type: string
          nullable: true
        givenName:
          description: givenName / first name
          type: string
          nullable: true
        lastName:
          description: last name
          type: string
          nullable: true
        mail:
          description: email addresses
          type: array
          items:
            type: string
          nullable: true
        description:
          description: verbose description
          type: string
          nullable: true
        faxNumbers:
          description: fax numbers
          type: array
          items:
            type: string
          nullable: true
        phoneNumbers:
          description: phone numbers
          type: array
          items:
            type: string
          nullable: true
        homePhoneNumbers:
          description: home phone numbers
          type: array
          items:
            type: string
          nullable: true
        mobilePhoneNumbers:
          description: mobile phone numbers
          type: array
          items:
            type: string
          nullable: true
        businessCategory:
          description: business category
          type: string
          nullable: true
        postalAddress:
          $ref: '#/components/schemas/PostalAddress'
        billingAddress:
          $ref: '#/components/schemas/PostalAddress'
        secretary:
          description: secretary
          type: string
          nullable: true
        employeeType:
          description: employee type
          type: string
          nullable: true
        employeeNumber:
          description: employee number
          type: string
          nullable: true
        labeledURI:
          description: URIs
          type: array
          items:
            type: string
          nullable: true

    User:
      description:  User Object 
      x-no-faid: true
      allOf:
        - type: object
          required:
            - dn
            - userName
          properties:
            dn:
              description: LDAP dn
              type: string
              nullable: false
            userName:
              description: unique userid
              type: string
              nullable: false
        - $ref: '#/components/schemas/UserBase'

    UserCreateRequest:
      description:  User Object 
      x-no-faid: true
      allOf:
        - type: object
          required:
            - parentDn
            - userName
          properties:
            parentDn:
              description: parent organization's LDAP dn
              type: string
              nullable: false
            userName:
              description: unique userid
              type: string
              nullable: false
        - $ref: '#/components/schemas/UserBase'
       
    UserGroupBase:
      description:  UserGroup Base Object 
      type: object
      x-no-faid: true
      required:
        - members
      properties:
        description:
          description: verbose description
          type: string
          nullable: true
        members:
          description: list of members user dn
          type: array
          items:
            type: string

    UserGroup:
      description:  UserGroup Object 
      x-no-faid: true
      allOf:
        - type: object
          required:
            - dn
            - name
          properties:
            dn:
              description: LDAP dn
              type: string
              nullable: false
            name:
              description: unique group name
              type: string
              nullable: false  
        - $ref: '#/components/schemas/UserGroupBase'

    UserGroupCreateRequest:
      description:  UserGroup Object for creating new groups
      x-no-faid: true
      allOf:
        - type: object
          required:
            - name
          properties:
            name:
              description: unique group name
              type: string
              nullable: false  
        - $ref: '#/components/schemas/UserGroupBase'
        
              
    OrganizationBase:
      description:  Organization Base Object 
      type: object
      x-no-faid: true
      properties:
        description:
          description: verbose description
          type: string
          nullable: true
        faxNumbers:
          description: fax numbers
          type: array
          items:
            type: string
          nullable: true
        phoneNumbers:
          description: phone numbers
          type: array
          items:
            type: string
          nullable: true
        businessCategory:
          description: business category
          type: string
          nullable: true
        postalAddress:
          $ref: '#/components/schemas/OrganizationalPostalAddress'
        billingAddress:
          $ref: '#/components/schemas/OrganizationalPostalAddress'

    Organization:
      description:  Organization Object 
      x-no-faid: true
      allOf:
        - type: object
          required:
            - dn
            - organizationName
          properties:
            dn:
              description: organization's LDAP dn
              type: string
              nullable: false
            organizationName:
              description: unique OrganizationalUnit name
              type: string
              nullable: false
        - $ref: '#/components/schemas/OrganizationBase'

    OrganizationCreateRequest:
      description:  Organization Object 
      x-no-faid: true
      allOf:
        - type: object
          required:
            - parentDn
            - organizationName
          properties:
            parentDn:
              description: parent organization's LDAP dn
              type: string
              nullable: false
            organizationName:
              description: unique OrganizationalUnit name
              type: string
              nullable: false              
        - $ref: '#/components/schemas/OrganizationBase'
               
    ChangePasswordRequest:
      description: change password request object
      type: object
      x-no-faid: true
      required:
       - current
       - new
      properties:
        current:
          description: current password
          type: string
          nullable: true
        new:
          description: new password
          type: string
          nullable: false
          
    ImportResult:
      type: object
      x-no-faid: true
      properties:
        problems:
          type: array
          items:
            type: string
        imported-objects:
          $ref: "#/components/schemas/FaObjectSet"
          
    FaObjectSet:
      type: object
      x-no-faid: true
      properties:
        fingerprints:
          type: array
          items:
            type: string
            format: uuid
        products:
          type: array
          items:
            type: string
            format: uuid
        sops:
          type: array
          items:
            type: string
            format: uuid
        workflows:
          type: array
          items:
            type: string
            format: uuid
        files:
          type: array
          items:
            type: string
            format: uuid
            
    ObjectEventPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/ObjectEvent'
            
    TransactionPageResult:
      type: object
      x-no-faid: true
      properties:
        pageNumber:
          type: integer
        pageCount:
          type: integer
        resultCount:
          type: integer
        results:
          type: array
          items:
            $ref: '#/components/schemas/DiscoveryServiceTransaction'

    BizTransaction:
      type: object
      x-no-faid: true
      description: bizTransaction
      x-ui-vue.js:
      - name: type
      - name: value
      properties:
        type:
          description: Type of transaction
          type: string
          example: 'http://foodauthent.de/data_set/fakx_model'
        value:
          description: Value of transaction
          type: string
          
    QuantityElement:
      type: object
      x-no-faid: true
      description: bizTransaction
      x-ui-vue.js:
      - name: epcClass
      - name: quantity
      - name: uom
      properties:
        epcClass:
          description: epcClass
          type: string
        quantity:
          description: quantity
          type: string
        uom:
          description: uom
          type: string
          
    Epc:
      type: object
      x-no-faid: true
      description: epc
      x-ui-vue.js:
      - name: epc
      properties:
        epc:
          description: epc
          type: string
          

    ObjectEvent:
      description: Object Event Transaction
      type: object
      x-ui-vue.js:
      - name: epcList
      - name: bizStep
      - name: readPoint
      - name: quantityList
      - name: action
      - name: disposition
      - name: bizTransactionList
      - name: gtin
      - name: bricks
      - name: eventTime
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
        epcList:
          description: List of epcs
          type: array
          items: 
            $ref: "#/components/schemas/Epc"
        bizStep:
          description: EPCIS bizStep
          type: string
        readPoint:
          description: Read point
          type: string
        quantityList:
          description: List of quantity
          type: array
          items: 
            $ref: "#/components/schemas/QuantityElement"
        action:
          description: Event action.
          type: string
          enum:
            - ADD
            - OBSERVE
            - DELETE
        disposition:
          description: EPCIS Disposition
          type: string
        bizTransactionList:
          description: List of bizTransactions
          type: array
          items:
            $ref: "#/components/schemas/BizTransaction"
        gtin:
          description: Global Trade Item Number
          type: string
        bricks:
          description: bricks
          type: array
          items:
            $ref: "#/components/schemas/GPCAttribute"
        eventTime:
          description: When the event happened
          type: string
          format: date
            

    DiscoveryServiceTransaction:
      description: DiscoveryServiceTransaction
      type: object
      x-ui-vue.js:
      - name: epcList
      - name: bizStep
      - name: readPoint
      - name: quantityList
      - name: action
      - name: disposition
      - name: bizTransactionList
      - name: gtin
      - name: bricks
      - name: sourceList
      - name: destinationList
      - name: ilmd
      - name: eventTime
      properties:
        fa-id:
          description: A global id within the FoodAuthent-system.
          type: string
          format: uuid
        epcList:
          description: List of epcs
          type: array
          items:
            $ref: "#/components/schemas/Epc"
        bizStep:
          description: EPCIS bizStep
          type: string
        readPoint:
          description: Read point
          type: string
        quantityList:
          description: List of quantity
          type: array
          items: 
            $ref: "#/components/schemas/QuantityElement"
        action:
          description: Event action.
          type: string
          enum:
            - ADD
            - OBSERVE
            - DELETE
        disposition:
          description: EPCIS Disposition
          type: string
        bizTransactionList:
          description: List of bizTransactions
          type: array
          items:
            $ref: "#/components/schemas/BizTransaction"
        gtin:
          description: Global Trade Item Number
          type: string
        bricks:
          description: bricks
          type: array
          items:
            $ref: "#/components/schemas/GPCAttribute"
        sourceList:
          description: List of sources
          type: array
          items:
            $ref: "#/components/schemas/BizTransaction"
        destinationList:
          description: List of destinations
          type: array
          items:
            $ref: "#/components/schemas/BizTransaction"
        ilmd:
          description: ilmd
          type: array
          items:
            type: string
        eventTime:
          description: When the event happened
          type: string
          format: date